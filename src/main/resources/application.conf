my-app {
  routes {
    # If ask takes more time than this to complete the request is failed
    ask-timeout = 5s
  }
}

mysqllocal = {
    driver = "com.mysql.cj.jdbc.Driver"
    url = "jdbc:mysql://127.0.0.1:3318/trace?useSSL=false&useUnicode=true&characterEncoding=UTF-8"
    user = "root"
    password = "root"
}

kamon {
  environment.service = "my-demo"
  apm.api-key = "1"
  trace.sampler = "always"
}

kamon.instrumentation.akka.http {
  server {
    metrics{
      enabled = yes
    }
    tracing {
      tags{
        url = span
        method = metric
        status-code = metric
        from-context {
          requestID = span
        }
      }
      enabled = yes
      span-metrics = on
    }
    propagation {
      enabled = yes
      channel = default
    }
  }

  client {
    tracing {
      enabled = yes
      span-metrics = on
    }
    propagation {
      enabled = yes
      channel = default
    }
  }
}

# Properties for akka.kafka.ProducerSettings can be
# defined in this section or a configuration section with
# the same layout.
akka.kafka.producer {
  # Config path of Akka Discovery method
  # "akka.discovery" to use the Akka Discovery method configured for the ActorSystem
  discovery-method = akka.discovery

  # Set a service name for use with Akka Discovery
  # https://doc.akka.io/docs/alpakka-kafka/current/discovery.html
  service-name = ""

  # Timeout for getting a reply from the discovery-method lookup
  resolve-timeout = 3 seconds

  # Tuning parameter of how many sends that can run in parallel.
  # In 2.0.0: changed the default from 100 to 10000
  parallelism = 10000

  # Duration to wait for `KafkaProducer.close` to finish.
  close-timeout = 60s

  # Call `KafkaProducer.close` when the stream is shutdown. This is important to override to false
  # when the producer instance is shared across multiple producer stages.
  close-on-producer-stop = true

  # Fully qualified config path which holds the dispatcher configuration
  # to be used by the producer stages. Some blocking may occur.
  # When this value is empty, the dispatcher configured for the stream
  # will be used.
  use-dispatcher = "akka.kafka.default-dispatcher"

  # The time interval to commit a transaction when using the `Transactional.sink` or `Transactional.flow`
  # for exactly-once-semantics processing.
  eos-commit-interval = 100ms

  # Properties defined by org.apache.kafka.clients.producer.ProducerConfig
  # can be defined in this configuration section.
  kafka-clients {
  }
}

kamon.instrumentation.okhttp {

  http-client {

    propagation {
      enabled = no
      channel = "default"
    }

    tracing {
      enabled = no
      span-metrics = on
    }
  }
}

kamon.instrumentation.kafka {
  client.tracing {
    continue-trace-on-consumer = yes
  }
}

akka.grpc.client {
  "helloworld.GreeterService" {
    host = 127.0.0.1
    port = 8081
  }
}

akka.http.server.preview.enable-http2 = on
